<!-- Enhanced UI Components for Instagram-like Features -->
<!-- Add these sections to your main index.html file -->

<!-- Enhanced Profile Section with Edit Button -->
<div id="profileSection" class="content-section">
  <div class="profile-header" style="text-align: center; padding: 2rem 1rem;">
    <div class="profile-avatar" style="width: 120px; height: 120px; border-radius: 50%; margin: 0 auto 1rem; background: #ddd; position: relative;">
      <button id="editProfileBtn" class="edit-profile-btn" style="position: absolute; bottom: 0; right: 0; width: 36px; height: 36px; border-radius: 50%; background: #007bff; color: white; border: none; cursor: pointer;">✏️</button>
    </div>
    <h2 id="profileUsername">@username</h2>
    <p id="profileFullName">Full Name</p>
    <p id="profileBio">Bio goes here...</p>
    <div id="profileStats" style="display: flex; justify-content: center; gap: 2rem; margin: 1rem 0;">
      <div><strong id="postsCount">0</strong> Posts</div>
      <div><strong id="followersCount">0</strong> Followers</div>
      <div><strong id="followingCount">0</strong> Following</div>
    </div>
    <div class="profile-actions" style="display: flex; gap: 1rem; justify-content: center;">
      <button class="btn btn-primary" onclick="showSection('create')">Create Post</button>
      <button class="btn btn-secondary" onclick="showSavedPosts()">Saved</button>
      <button class="btn btn-secondary" onclick="showSettings()">Settings</button>
    </div>
  </div>
  
  <!-- Profile Content Tabs -->
  <div class="profile-tabs" style="display: flex; border-bottom: 1px solid #ddd;">
    <button class="tab-btn active" data-tab="posts" onclick="showProfileTab('posts')">📷 Posts</button>
    <button class="tab-btn" data-tab="reels" onclick="showProfileTab('reels')">🎬 Reels</button>
    <button class="tab-btn" data-tab="tagged" onclick="showProfileTab('tagged')">🏷️ Tagged</button>
  </div>
  
  <div id="profileContent" class="profile-content" style="padding: 1rem;">
    <!-- Profile posts grid will be loaded here -->
  </div>
</div>

<!-- Enhanced Notifications Section -->
<div id="notificationsSection" class="content-section">
  <div class="notifications-header" style="padding: 1rem; border-bottom: 1px solid #ddd;">
    <h2>Activity</h2>
    <div class="notification-tabs" style="display: flex; gap: 1rem; margin-top: 1rem;">
      <button class="notification-tab active" onclick="loadNotifications('all')">All</button>
      <button class="notification-tab" onclick="loadNotifications('follow')">Following</button>
      <button class="notification-tab" onclick="loadNotifications('like')">Likes</button>
      <button class="notification-tab" onclick="loadNotifications('comment')">Comments</button>
    </div>
  </div>
  <div id="notificationsList" class="notifications-list">
    <!-- Notifications will be loaded here -->
  </div>
</div>

<!-- Enhanced Search Section -->
<div id="searchSection" class="content-section">
  <div class="search-header" style="padding: 1rem;">
    <div class="search-input-container" style="position: relative;">
      <input type="text" id="searchQuery" placeholder="Search users, hashtags..." style="width: 100%; padding: 0.75rem 1rem; border: 1px solid #ddd; border-radius: 25px; outline: none;">
      <div class="search-icon" style="position: absolute; right: 1rem; top: 50%; transform: translateY(-50%); color: #666;">🔍</div>
    </div>
  </div>
  
  <!-- Recent Searches -->
  <div class="recent-searches" style="padding: 0 1rem;">
    <h4 style="color: #666; font-size: 0.9rem; margin-bottom: 0.5rem;">Recent</h4>
    <div id="recentSearches">
      <!-- Recent searches will be loaded here -->
    </div>
  </div>
  
  <!-- Search Results -->
  <div id="searchResults" class="search-results" style="padding: 1rem;">
    <!-- Search results will be loaded here -->
  </div>
  
  <!-- Trending Hashtags -->
  <div class="trending-section" style="padding: 1rem; border-top: 1px solid #ddd;">
    <h4 style="color: #666; font-size: 0.9rem; margin-bottom: 1rem;">Trending</h4>
    <div id="trendingHashtags">
      <div class="hashtag-item" onclick="searchHashtag('love')" style="padding: 0.5rem 0; cursor: pointer;">
        <div style="font-weight: 600;">#love</div>
        <div style="font-size: 0.8rem; color: #666;">1.2M posts</div>
      </div>
      <div class="hashtag-item" onclick="searchHashtag('instagood')" style="padding: 0.5rem 0; cursor: pointer;">
        <div style="font-weight: 600;">#instagood</div>
        <div style="font-size: 0.8rem; color: #666;">890K posts</div>
      </div>
      <div class="hashtag-item" onclick="searchHashtag('photooftheday')" style="padding: 0.5rem 0; cursor: pointer;">
        <div style="font-weight: 600;">#photooftheday</div>
        <div style="font-size: 0.8rem; color: #666;">650K posts</div>
      </div>
    </div>
  </div>
</div>

<!-- Enhanced Messages Section -->
<div id="messagesSection" class="content-section">
  <div class="messages-header" style="display: flex; align-items: center; padding: 1rem; border-bottom: 1px solid #ddd;">
    <h2 style="flex: 1;">Direct</h2>
    <button onclick="startNewConversation()" class="btn btn-primary">✉️ New Message</button>
  </div>
  
  <!-- Conversations List -->
  <div id="conversationsList" class="conversations-list">
    <!-- Conversations will be loaded here -->
  </div>
  
  <!-- Active Conversation -->
  <div id="activeConversation" class="active-conversation" style="display: none;">
    <div class="conversation-header" style="display: flex; align-items: center; padding: 1rem; border-bottom: 1px solid #ddd;">
      <button onclick="backToConversations()" class="btn btn-ghost">←</button>
      <div class="conversation-user" style="display: flex; align-items: center; gap: 0.75rem; flex: 1; margin-left: 1rem;">
        <div class="user-avatar" style="width: 32px; height: 32px; border-radius: 50%; background: #ddd;"></div>
        <div>
          <div class="username" style="font-weight: 600;"></div>
          <div class="online-status" style="font-size: 0.8rem; color: #666;"></div>
        </div>
      </div>
    <div class="conversation-actions">
      <button onclick="showConversationInfo()" class="btn btn-ghost">ℹ️</button>
    </div>
    </div>
    
    <div id="messagesContainer" class="messages-container" style="flex: 1; overflow-y: auto; padding: 1rem;">
      <!-- Messages will be loaded here -->
    </div>
    
    <div class="message-input-container" style="padding: 1rem; border-top: 1px solid #ddd;">
      <div style="display: flex; align-items: center; gap: 0.5rem;">
        <button onclick="attachFile()" class="btn btn-ghost">📎</button>
        <button onclick="sendPhoto()" class="btn btn-ghost">📷</button>
        <input type="text" id="messageInput" placeholder="Message..." style="flex: 1; padding: 0.5rem; border: 1px solid #ddd; border-radius: 20px; outline: none;">
        <button onclick="sendMessage()" class="btn btn-primary">Send</button>
      </div>
    </div>
  </div>
</div>

<!-- Create Post Modal (Enhanced) -->
<div id="createPostModal" class="modal hidden">
  <div class="modal-backdrop" onclick="closeCreatePost()"></div>
  <div class="modal-dialog" style="max-width: 600px;">
    <div class="modal-header">
      <h3>Create New Post</h3>
      <button onclick="closeCreatePost()" class="close-btn">×</button>
    </div>
    <form id="createPostForm" class="modal-form">
      <!-- Media Upload -->
      <div class="form-group">
        <div class="media-upload-area" onclick="selectPostMedia()" style="border: 2px dashed #ddd; padding: 3rem; text-align: center; cursor: pointer; border-radius: 8px; background: #f9f9f9;">
          <div id="mediaPreview" style="display: none;"></div>
          <div id="uploadPrompt">
            <div style="font-size: 4rem; margin-bottom: 1rem; color: #666;">📷</div>
            <h4 style="margin-bottom: 0.5rem; color: #333;">Drag photos and videos here</h4>
            <p style="color: #666;">or click to select from your computer</p>
          </div>
        </div>
        <input type="file" id="postMediaInput" accept="image/*,video/*" multiple style="display: none;">
      </div>
      
      <!-- Caption -->
      <div class="form-group">
        <div style="display: flex; gap: 1rem;">
          <div class="user-avatar" style="width: 32px; height: 32px; border-radius: 50%; background: #ddd; flex-shrink: 0;"></div>
          <div style="flex: 1;">
            <textarea id="postCaption" placeholder="Write a caption..." rows="4" style="width: 100%; border: none; outline: none; resize: none; font-size: 16px;" maxlength="2200"></textarea>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem;">
              <button type="button" onclick="addEmoji()" class="btn btn-ghost">😊</button>
              <span id="captionCount" style="color: #666; font-size: 0.8rem;">0/2200</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Location -->
      <div class="form-group">
        <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem 0; border-bottom: 1px solid #efefef;">
          <span>📍</span>
          <input type="text" id="postLocation" placeholder="Add location" style="border: none; outline: none; flex: 1;">
        </div>
      </div>
      
      <!-- Accessibility -->
      <div class="form-group">
        <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem 0; border-bottom: 1px solid #efefef;">
          <span>♿</span>
          <input type="text" id="altText" placeholder="Write alt text..." style="border: none; outline: none; flex: 1;">
        </div>
      </div>
      
      <!-- Advanced Settings -->
      <div class="form-group">
        <details>
          <summary style="cursor: pointer; padding: 0.75rem 0; font-weight: 600;">Advanced Settings</summary>
          <div style="padding: 1rem 0;">
            <div class="setting-item" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
              <span>Hide like and view counts</span>
              <input type="checkbox" id="hideCounts">
            </div>
            <div class="setting-item" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
              <span>Turn off commenting</span>
              <input type="checkbox" id="disableComments">
            </div>
            <div class="setting-item">
              <label>Audience</label>
              <select id="postAudience" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                <option value="public">Everyone</option>
                <option value="followers">Followers</option>
                <option value="close_friends">Close Friends</option>
              </select>
            </div>
          </div>
        </details>
      </div>
      
      <div class="form-actions" style="display: flex; justify-content: space-between; padding-top: 1rem; border-top: 1px solid #efefef;">
        <button type="button" onclick="saveDraft()" class="btn btn-secondary">Save Draft</button>
        <button type="submit" class="btn btn-primary">Share</button>
      </div>
    </form>
  </div>
</div>

<!-- User Profile Modal (Enhanced) -->
<div id="userProfileModal" class="modal hidden">
  <div class="modal-backdrop" onclick="closeUserProfile()"></div>
  <div class="modal-dialog" style="max-width: 600px; max-height: 90vh; overflow-y: auto;">
    <div class="modal-header">
      <div style="display: flex; align-items: center; gap: 1rem;">
        <div class="user-avatar" style="width: 32px; height: 32px; border-radius: 50%; background: #ddd;"></div>
        <h3 id="modalUsername">@username</h3>
      </div>
      <div class="profile-actions">
        <button id="followBtn" onclick="toggleFollow()" class="btn btn-primary">Follow</button>
        <button onclick="sendMessage()" class="btn btn-secondary">Message</button>
        <div class="dropdown">
          <button class="btn btn-ghost">⋯</button>
          <div class="dropdown-menu">
            <button onclick="reportUser()">Report</button>
            <button onclick="blockUser()">Block</button>
            <button onclick="copyProfile()">Copy Profile URL</button>
          </div>
        </div>
      </div>
      <button onclick="closeUserProfile()" class="close-btn">×</button>
    </div>
    <div id="userProfileContent" class="modal-form">
      <!-- User profile content will be loaded here -->
    </div>
  </div>
</div>

<!-- Edit Profile Modal -->
<div id="editProfileModal" class="modal hidden">
  <div class="modal-backdrop" onclick="closeEditProfile()"></div>
  <div class="modal-dialog" style="max-width: 500px;">
    <div class="modal-header">
      <h3>Edit Profile</h3>
      <button onclick="closeEditProfile()" class="close-btn">×</button>
    </div>
    <form id="editProfileForm" class="modal-form">
      <!-- Profile Picture Upload -->
      <div class="form-group" style="text-align: center;">
        <div class="profile-pic-container" style="position: relative; display: inline-block; margin-bottom: 1rem;">
          <div id="currentProfilePic" class="profile-pic" style="width: 120px; height: 120px; border-radius: 50%; background: #ddd; margin: 0 auto; overflow: hidden; position: relative; cursor: pointer;" onclick="selectProfilePic()">
            <img id="profilePicPreview" style="width: 100%; height: 100%; object-fit: cover; display: none;" />
            <div id="profilePicPlaceholder" style="display: flex; align-items: center; justify-content: center; height: 100%; color: #666; font-size: 3rem;">📷</div>
          </div>
          <button type="button" onclick="selectProfilePic()" class="btn btn-primary" style="margin-top: 0.5rem;">Change Photo</button>
        </div>
        <input type="file" id="profilePicInput" accept="image/*" style="display: none;">
      </div>
      
      <!-- Profile Information -->
      <div class="form-group">
        <label>Username</label>
        <input type="text" id="edit_username" placeholder="Username" required>
      </div>
      
      <div class="form-group">
        <label>Full Name</label>
        <input type="text" id="edit_fullname" placeholder="Full Name">
      </div>
      
      <div class="form-group">
        <label>Bio</label>
        <textarea id="edit_bio" placeholder="Tell us about yourself..." rows="3" maxlength="150"></textarea>
        <div style="text-align: right; font-size: 0.8rem; color: #666; margin-top: 0.25rem;">
          <span id="bioCount">0</span>/150
        </div>
      </div>
      
      <div class="form-group">
        <label>Website/Links</label>
        <textarea id="edit_links" placeholder="Add your website or social links (one per line)" rows="2"></textarea>
      </div>
      
      <!-- Privacy Settings -->
      <div class="form-group">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div>
            <div style="font-weight: 600;">Private Account</div>
            <div style="font-size: 0.8rem; color: #666;">Only followers can see your posts</div>
          </div>
          <input type="checkbox" id="edit_private" style="width: auto;">
        </div>
      </div>
      
      <div class="form-actions">
        <button type="button" onclick="closeEditProfile()" class="btn btn-secondary">Cancel</button>
        <button type="submit" class="btn btn-primary">Save Changes</button>
      </div>
    </form>
  </div>
</div>

<!-- Settings Modal -->
<div id="settingsModal" class="modal hidden">
  <div class="modal-backdrop" onclick="closeSettings()"></div>
  <div class="modal-dialog" style="max-width: 500px;">
    <div class="modal-header">
      <h3>Settings</h3>
      <button onclick="closeSettings()" class="close-btn">×</button>
    </div>
    <div class="modal-form">
      <div class="settings-menu">
        <div class="setting-item" onclick="showEditProfile()" style="padding: 1rem; border-bottom: 1px solid #efefef; cursor: pointer;">
          <div style="display: flex; align-items: center; gap: 1rem;">
            <span style="font-size: 1.2rem;">👤</span>
            <div>
              <div style="font-weight: 600;">Edit Profile</div>
              <div style="font-size: 0.8rem; color: #666;">Change photo, name, bio, etc.</div>
            </div>
          </div>
        </div>
        
        <div class="setting-item" onclick="showPrivacySettings()" style="padding: 1rem; border-bottom: 1px solid #efefef; cursor: pointer;">
          <div style="display: flex; align-items: center; gap: 1rem;">
            <span style="font-size: 1.2rem;">🔒</span>
            <div>
              <div style="font-weight: 600;">Privacy</div>
              <div style="font-size: 0.8rem; color: #666;">Account privacy, blocked accounts</div>
            </div>
          </div>
        </div>
        
        <div class="setting-item" onclick="showNotificationSettings()" style="padding: 1rem; border-bottom: 1px solid #efefef; cursor: pointer;">
          <div style="display: flex; align-items: center; gap: 1rem;">
            <span style="font-size: 1.2rem;">🔔</span>
            <div>
              <div style="font-weight: 600;">Notifications</div>
              <div style="font-size: 0.8rem; color: #666;">Push, email, SMS notifications</div>
            </div>
          </div>
        </div>
        
        <div class="setting-item" onclick="showSavedPosts()" style="padding: 1rem; border-bottom: 1px solid #efefef; cursor: pointer;">
          <div style="display: flex; align-items: center; gap: 1rem;">
            <span style="font-size: 1.2rem;">🔖</span>
            <div>
              <div style="font-weight: 600;">Saved</div>
              <div style="font-size: 0.8rem; color: #666;">View saved posts</div>
            </div>
          </div>
        </div>
        
        <div class="setting-item" onclick="showCloseFriends()" style="padding: 1rem; border-bottom: 1px solid #efefef; cursor: pointer;">
          <div style="display: flex; align-items: center; gap: 1rem;">
            <span style="font-size: 1.2rem;">⭐</span>
            <div>
              <div style="font-weight: 600;">Close Friends</div>
              <div style="font-size: 0.8rem; color: #666;">Manage your close friends list</div>
            </div>
          </div>
        </div>
        
        <div class="setting-item" onclick="logout()" style="padding: 1rem; cursor: pointer; color: #ed4956;">
          <div style="display: flex; align-items: center; gap: 1rem;">
            <span style="font-size: 1.2rem;">🚪</span>
            <div>
              <div style="font-weight: 600;">Log Out</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Report Modal -->
<div id="reportModal" class="modal hidden">
  <div class="modal-backdrop" onclick="closeReport()"></div>
  <div class="modal-dialog" style="max-width: 400px;">
    <div class="modal-header">
      <h3>Report</h3>
      <button onclick="closeReport()" class="close-btn">×</button>
    </div>
    <form id="reportForm" class="modal-form">
      <div class="form-group">
        <label>Why are you reporting this?</label>
        <div class="report-reasons">
          <label style="display: block; margin-bottom: 0.5rem;">
            <input type="radio" name="reportReason" value="spam"> Spam
          </label>
          <label style="display: block; margin-bottom: 0.5rem;">
            <input type="radio" name="reportReason" value="harassment"> Harassment or bullying
          </label>
          <label style="display: block; margin-bottom: 0.5rem;">
            <input type="radio" name="reportReason" value="hate_speech"> Hate speech
          </label>
          <label style="display: block; margin-bottom: 0.5rem;">
            <input type="radio" name="reportReason" value="violence"> Violence or dangerous content
          </label>
          <label style="display: block; margin-bottom: 0.5rem;">
            <input type="radio" name="reportReason" value="nudity"> Nudity or sexual content
          </label>
          <label style="display: block; margin-bottom: 0.5rem;">
            <input type="radio" name="reportReason" value="false_info"> False information
          </label>
          <label style="display: block; margin-bottom: 0.5rem;">
            <input type="radio" name="reportReason" value="other"> Other
          </label>
        </div>
      </div>
      
      <div class="form-group">
        <label>Additional details (optional)</label>
        <textarea id="reportDetails" placeholder="Provide more context..." rows="3"></textarea>
      </div>
      
      <div class="form-actions">
        <button type="button" onclick="closeReport()" class="btn btn-secondary">Cancel</button>
        <button type="submit" class="btn btn-danger">Submit Report</button>
      </div>
    </form>
  </div>
</div>

<style>
/* Enhanced UI Styles */
.content-section {
  display: none;
  min-height: 100vh;
  background: white;
}

.content-section.active {
  display: block;
}

.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal.hidden {
  display: none;
}

.modal-backdrop {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
}

.modal-dialog {
  position: relative;
  background: white;
  border-radius: 12px;
  max-width: 90vw;
  max-height: 90vh;
  overflow: hidden;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 1.5rem;
  border-bottom: 1px solid #efefef;
}

.modal-form {
  padding: 1.5rem;
  max-height: 70vh;
  overflow-y: auto;
}

.form-group {
  margin-bottom: 1.5rem;
}

.form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: #333;
}

.form-group input,
.form-group textarea,
.form-group select {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid #ddd;
  border-radius: 6px;
  font-size: 16px;
  outline: none;
  transition: border-color 0.2s;
}

.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
  border-color: #007bff;
}

.form-actions {
  display: flex;
  gap: 1rem;
  justify-content: flex-end;
  margin-top: 2rem;
}

.btn {
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.btn-primary {
  background: #007bff;
  color: white;
}

.btn-primary:hover {
  background: #0056b3;
}

.btn-secondary {
  background: #6c757d;
  color: white;
}

.btn-secondary:hover {
  background: #545b62;
}

.btn-danger {
  background: #dc3545;
  color: white;
}

.btn-danger:hover {
  background: #c82333;
}

.btn-ghost {
  background: transparent;
  color: #666;
  border: 1px solid transparent;
}

.btn-ghost:hover {
  background: #f8f9fa;
}

.close-btn {
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: #666;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.close-btn:hover {
  background: #f8f9fa;
}

.tab-btn {
  flex: 1;
  padding: 1rem;
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  cursor: pointer;
  font-weight: 600;
  color: #666;
  transition: all 0.2s;
}

.tab-btn.active {
  color: #007bff;
  border-bottom-color: #007bff;
}

.notification-tab {
  padding: 0.5rem 1rem;
  background: none;
  border: none;
  border-radius: 20px;
  cursor: pointer;
  font-weight: 600;
  color: #666;
  transition: all 0.2s;
}

.notification-tab.active {
  background: #007bff;
  color: white;
}

.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-menu {
  position: absolute;
  top: 100%;
  right: 0;
  background: white;
  border: 1px solid #ddd;
  border-radius: 6px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  min-width: 150px;
  z-index: 1000;
}

.dropdown-menu button {
  display: block;
  width: 100%;
  padding: 0.75rem 1rem;
  background: none;
  border: none;
  text-align: left;
  cursor: pointer;
  transition: background 0.2s;
}

.dropdown-menu button:hover {
  background: #f8f9fa;
}

/* Profile Picture Upload Styles */
.profile-pic {
  border: 3px solid #ddd;
  transition: border-color 0.2s;
}

.profile-pic:hover {
  border-color: #007bff;
}

.profile-pic-container .btn {
  font-size: 0.9rem;
  padding: 0.5rem 1rem;
}

.setting-item {
  transition: background 0.2s;
}

.setting-item:hover {
  background: rgba(0, 0, 0, 0.05);
}

/* Responsive Design */
@media (max-width: 768px) {
  .modal-dialog {
    max-width: 95vw;
    margin: 1rem;
  }
  
  .form-actions {
    flex-direction: column;
  }
  
  .btn {
    width: 100%;
  }
  
  .profile-pic {
    width: 100px !important;
    height: 100px !important;
  }
}
</style>